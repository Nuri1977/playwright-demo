/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var k=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})},m=this||self,p=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},q=function(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return q.apply(null,arguments)},r=function(a,b){function c(){}c.prototype=b.prototype;a.Y=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Da=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}},
t=function(a){return a};var u="getAccounts hello getLogBuffer recordLog getQuirks updateQuirks uiEvent".split(" ");var ha=function(a){switch(a){case v.name:return v;case ca.name:return ca;case w.name:return w;case da.name:return da;case ea.name:return ea;default:let b=fa.get(a);b||(b=new x(a),fa.set(a,b));return b}},x=class{constructor(a){this.name=a}toString(){return this.name}},fa=new Map,v=new x("async"),ca=new x("generic"),w=new x("runtime"),da=new x("system"),ea=new x("crypto"),ia=class extends Error{constructor(a,b,c){super(c);this.code=a;this.category=b;Object.setPrototypeOf(this,new.target.prototype)}toString(){return`${this.category}:${this.code} (${this.message||
"Undefined error."})`}};var ja=class{constructor(){let a=void 0,b=void 0;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}},ka=class extends ia{constructor(a,b="One or more errors occurred."){super(1,v,b);this.errors=a;Object.setPrototypeOf(this,new.target.prototype)}flatten(){const a=[],b=[this.errors.slice(0)];for(;0!==b.length;){const c=b[0];for(;0!==c.length;){const d=c.shift();if(d instanceof ka){b.unshift(d.errors.slice(0));break}else a.push(d)}b[0]===c&&b.shift()}return new ka(a,this.message)}};function y(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,y);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));void 0!==b&&(this.cause=b)}r(y,Error);y.prototype.name="CustomError";const la=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(let c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var z=function(){this.fa=Date.now()},ma=null;z.prototype.set=function(a){this.fa=a};z.prototype.reset=function(){this.set(Date.now())};z.prototype.get=function(){return this.fa};function na(a,b){for(const c in a)if(b.call(void 0,a[c],c,a))return!0;return!1};var oa,pa=function(){if(void 0===oa){var a=null,b=m.trustedTypes;if(b&&b.createPolicy)try{a=b.createPolicy("goog#html",{createHTML:t,createScript:t,createScriptURL:t})}catch(c){m.console&&m.console.error(c.message)}oa=a}return oa};var ra=class{constructor(a,b){this.da=b===qa?a:""}toString(){return this.da+""}},sa=function(a){return a instanceof ra&&a.constructor===ra?a.da:"type_error:TrustedResourceUrl"},qa={},ta=function(a){const b=pa();a=b?b.createScriptURL(a):a;return new ra(a,qa)};var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},xa=function(){var a=A(),b="";if(B&&B.platform?"Windows"===B.platform:C("Windows"))b=/Windows (?:NT|Phone) ([0-9.]+)/,b=(a=b.exec(a))?a[1]:"0.0";else if(va()||C("iPad")||C("iPod"))b=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,b=(a=b.exec(a))&&a[1].replace(/_/g,".");else if(B&&B.platform?"macOS"===B.platform:C("Macintosh"))b=/Mac OS X ([0-9_.]+)/,b=(a=b.exec(a))?a[1].replace(/_/g,"."):
"10";else if(-1!=A().toLowerCase().indexOf("kaios"))b=/(?:KaiOS)\/(\S+)/i,b=(a=b.exec(a))&&a[1];else if(B&&B.platform?"Android"===B.platform:C("Android"))b=/Android\s+([^\);]+)(\)|;)/,b=(a=b.exec(a))&&a[1];else if(B&&B.platform?"Chrome OS"===B.platform:C("CrOS"))b=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,b=(a=b.exec(a))&&a[1];a=0;b=ua(String(b||"")).split(".");const c=ua("16").split("."),d=Math.max(b.length,c.length);for(let g=0;0==a&&g<d;g++){var e=b[g]||"",f=c[g]||"";do{e=/(\d*)(\D*)(.*)/.exec(e)||
["","","",""];f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];if(0==e[0].length&&0==f[0].length)break;a=wa(0==e[1].length?0:parseInt(e[1],10),0==f[1].length?0:parseInt(f[1],10))||wa(0==e[2].length,0==f[2].length)||wa(e[2],f[2]);e=e[3];f=f[3]}while(0==a)}return a},wa=function(a,b){return a<b?-1:a>b?1:0};var E=class{constructor(a,b){this.ca=b===ya?a:""}toString(){return this.ca.toString()}},ya={},za=new E("about:invalid#zClosurez",ya);a:for(var Aa=["CLOSURE_FLAGS"],Ba=m,Ca=0;Ca<Aa.length;Ca++)if(Ba=Ba[Aa[Ca]],null==Ba)break a;function A(){var a=m.navigator;return a&&(a=a.userAgent)?a:""}var B;const Da=m.navigator;B=Da?Da.userAgentData||null:null;function Ea(a){return B?B.brands.some(({brand:b})=>b&&-1!=b.indexOf(a)):!1}function C(a){return-1!=A().indexOf(a)};function F(){return!!B&&0<B.brands.length}function Fa(){return F()?Ea("Chromium"):(C("Chrome")||C("CriOS"))&&!(F()?0:C("Edge"))||C("Silk")};const Ga={};var Ia=function(a){const b=pa();a=b?b.createHTML(a):a;return new Ha(a,Ga)};class Ha{constructor(a,b){this.ba=b===Ga?a:""}toString(){return this.ba.toString()}};var G=class{constructor(a,b){this.name=a;this.value=b}toString(){return this.name}},Ja=new G("OFF",Infinity),Ka=new G("CONFIG",700),H=[Ja,new G("SHOUT",1200),new G("SEVERE",1E3),new G("WARNING",900),new G("INFO",800),Ka,new G("FINE",500),new G("FINER",400),new G("FINEST",300),new G("ALL",0)],I=null,La=class{constructor(a,b,c,d,e){this.aa=void 0;this.reset(a||Ja,b,c,d,e)}reset(a,b,c,d){this.la=d||Date.now();this.ra=a;this.ua=b;this.ta=c;this.aa=void 0}getMessage(){return this.ua}},Ma=class{constructor(a=
null){this.level=null;this.qa=[];this.parent=a||null;this.children=[]}publish(a){let b=this;for(;b;)b.qa.forEach(c=>{c(a)}),b=b.parent}},Na=function(a,b){var c=a.entries[b];if(c)return c;c=Na(a,b.slice(0,Math.max(b.lastIndexOf("."),0)));const d=new Ma(c);a.entries[b]=d;c.children.push(d);return d},Oa=class{constructor(){this.entries={};const a=new Ma;a.level=Ka;this.entries[""]=a}},Pa;var J=function(a){this.va=a||"";ma||(ma=new z);this.za=ma};J.prototype.ma=!0;J.prototype.ha=!0;J.prototype.ia=!0;J.prototype.ya=!0;J.prototype.xa=!1;J.prototype.ja=!1;var K=function(a){return 10>a?"0"+a:String(a)},Qa=function(a){J.call(this,a)};r(Qa,J);function Ra(){var a=new Qa;a.ha=!0;a.ia=!1;a.ja=!0;return a}var Sa=Na;Pa||(Pa=new Oa);Sa(Pa,"");var Ta=new G("TRACE",100);H.push(new G("DEBUG",600));H.push(Ta);function Ua(a){switch(a.type){case 0:return a.object;case 1:return Error(a.message);case 2:return new ia(a.code,ha(a.category),a.message);case 3:return new ka(a.errors.map(Ua),a.message)}};var Va=function(a,...b){return k(function*(){const c=new ja;chrome.runtime.sendMessage({method:a,args:b},d=>{const e=chrome.runtime.lastError;e?c.reject(new ia(1,w,`Operation '${String(a)}' failed. ${e.message||"Undefined error."}`)):d.error?c.reject(Ua(d.error)):c.resolve(d.output)});return c.promise}())},Xa=function(){var a=new Wa;for(const [c,d]of a.ea){const e=c;var b=d;if(u.every(f=>e.has(f)))return b}b={};for(const c of u)Object.defineProperty(b,c,{value:(...d)=>Va(c,...d),writable:!1});a.ea.set(new Set(u),
b);return b},Wa=class{constructor(){this.events=new Map;this.ea=new Map}};function va(){return C("iPhone")&&!C("iPod")&&!C("iPad")};var Ya=function(a){Ya[" "](a);return a};Ya[" "]=function(){};var Za=C("Gecko")&&!(-1!=A().toLowerCase().indexOf("webkit")&&!C("Edge"))&&!(C("Trident")||C("MSIE"))&&!C("Edge"),$a=-1!=A().toLowerCase().indexOf("webkit")&&!C("Edge"),ab,bb=m.navigator||null;ab=bb&&bb.platform||"";var cb=function(){};var db=/^[\w+/_-]+[=]{0,2}$/,eb=function(){var a=m.document;return a.querySelector?(a=a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&db.test(a)?a:"":""};var L=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};var fb=function(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};var M=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=!1};M.prototype.stopPropagation=function(){};M.prototype.preventDefault=function(){this.defaultPrevented=!0};var gb=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{m.addEventListener("test",()=>{},b),m.removeEventListener("test",()=>{},b)}catch(c){}return a}();var N=function(a,b){M.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.G=null;a&&this.X(a,b)};r(N,M);var hb={2:"touch",3:"pen",4:"mouse"};
N.prototype.X=function(a,b){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Za){a:{try{Ya(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=
d.screenY||0):(this.offsetX=$a||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=$a||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=
a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:hb[a.pointerType]||"";this.state=a.state;this.G=a;a.defaultPrevented&&N.Y.preventDefault.call(this)};N.prototype.stopPropagation=function(){N.Y.stopPropagation.call(this);this.G.stopPropagation?this.G.stopPropagation():this.G.cancelBubble=!0};N.prototype.preventDefault=function(){N.Y.preventDefault.call(this);var a=this.G;a.preventDefault?a.preventDefault():a.returnValue=!1};var ib="closure_listenable_"+(1E6*Math.random()|0);var jb=0;var lb=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.V=e;this.key=++jb;this.removed=this.S=!1},O=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.V=null};var P=function(a){this.src=a;this.g={};this.I=0};P.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.I++);var g=mb(a,b,d,e);-1<g?(b=a[g],c||(b.S=!1)):(b=new lb(b,this.src,f,!!d,e),b.S=c,a.push(b));return b};P.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=mb(e,b,c,d);return-1<b?(O(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.g[a],this.I--),!0):!1};
var nb=function(a,b){var c=b.type;if(c in a.g){var d=a.g[c],e=la(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(O(b),0==a.g[c].length&&(delete a.g[c],a.I--))}};P.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,O(d[e]);delete this.g[c];this.I--}return b};
P.prototype.hasListener=function(a,b){var c=void 0!==a,d=c?a.toString():"",e=void 0!==b;return na(this.g,function(f){for(var g=0;g<f.length;++g)if(!(c&&f[g].type!=d||e&&f[g].capture!=b))return!0;return!1})};var mb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.V==d)return e}return-1};var ob="closure_lm_"+(1E6*Math.random()|0),pb={},qb=0,sb=function(){const a=rb,b=function(c){return a.call(b.src,b.listener,c)};return b},tb=function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)tb(a,b[f],c,d,e);else if(c=ub(c),a&&a[ib])a.oa.add(String(b),c,!0,p(d)?!!d.capture:!!d,e);else{if(!b)throw Error("Invalid event type");f=p(d)?!!d.capture:!!d;var g=vb(a);g||(a[ob]=g=new P(a));c=g.add(b,c,!0,f,e);if(!c.proxy){e=sb();c.proxy=e;e.src=a;e.listener=c;if(a.addEventListener)gb||(d=f),
void 0===d&&(d=!1),a.addEventListener(b.toString(),e,d);else if(a.attachEvent)a.attachEvent(wb(b.toString()),e);else if(a.addListener&&a.removeListener)a.addListener(e);else throw Error("addEventListener and attachEvent are unavailable.");qb++}}},wb=function(a){return a in pb?pb[a]:pb[a]="on"+a},rb=function(a,b){if(a.removed)a=!0;else{b=new N(b,this);var c=a.listener,d=a.V||a.src;if(a.S&&"number"!==typeof a&&a&&!a.removed){var e=a.src;if(e&&e[ib])nb(e.oa,a);else{var f=a.type,g=a.proxy;e.removeEventListener?
e.removeEventListener(f,g,a.capture):e.detachEvent?e.detachEvent(wb(f),g):e.addListener&&e.removeListener&&e.removeListener(g);qb--;(f=vb(e))?(nb(f,a),0==f.I&&(f.src=null,e[ob]=null)):O(a)}}a=c.call(d,b)}return a},vb=function(a){a=a[ob];return a instanceof P?a:null},xb="__closure_events_fn_"+(1E9*Math.random()>>>0),ub=function(a){if("function"===typeof a)return a;a[xb]||(a[xb]=function(b){return a.handleEvent(b)});return a[xb]};/*

 SPDX-License-Identifier: Apache-2.0
*/
var yb;try{new URL("s://g"),yb=!0}catch(a){yb=!1}const zb=yb;class Ab{constructor(a){this.isValid=a}}function Q(a){return new Ab(b=>b.substr(0,a.length+1).toLowerCase()===a+":")}const Bb=[Q("data"),Q("http"),Q("https"),Q("mailto"),Q("ftp"),new Ab(a=>/^[^:]*([/?#]|$)/.test(a))];function Cb(a,b=Bb){for(let c=0;c<b.length;++c){const d=b[c];if(d instanceof Ab&&d.isValid(a))return new E(a,ya)}};function Db(a){var b={};a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");b.Fa&&(a=a.replace(/(^|[\r\n\t ]) /g,"$1&#160;"));b.Ea&&(a=a.replace(/(\r\n|\n|\r)/g,"<br>"));b.Ga&&(a=a.replace(/(\t+)/g,'<span style="white-space:pre">$1</span>'));return Ia(a)};function Eb(a){let b=sa(Fb).toString();if(/#/.test(b))throw Error("");let c=/\?/.test(b)?"&":"?";a.forEach((d,e)=>{d=d instanceof Array?d:[d];for(let f=0;f<d.length;f++){const g=d[f];null!==g&&void 0!==g&&(b+=c+encodeURIComponent(e)+"="+encodeURIComponent(String(g)),c="&")}});return ta(b)};const Fb=ta("/iframe_sandbox.html");
var Gb=function(){return new Promise(a=>{"loading"!=document.readyState?a():tb(document,"DOMContentLoaded",()=>{a()})})},Hb=function(){const a=(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16));return Array.prototype.join.call(a,".")},Kb=class{constructor(){this.port=this.O=null;this.T=[]}load(){const a=Hb();this.O=Ib(a);Gb().then(()=>{this.O&&document.body.appendChild(this.O)});return Jb(this.O,a).then(b=>{for(this.port=b.ports[0];0<this.T.length;)b=this.T.shift(),this.port.postMessage(b.data,
b.Aa)})}exec(a,b){return new Promise((c,d)=>{const e=new MessageChannel;e.port1.onmessage=n=>{e.port1.onmessage=null;n=n.data;null!=n.error?d(new EvalError(n.error)):c(n.result)};var f=null!=b?b:[];const g=[],h=[],l=[];for(const n of f)g.push(n.name),h.push(n.value),n.transfer&&l.push(n.value);f={code:a,paramNames:g,values:h};this.port?this.port.postMessage(f,[e.port2,...l]):this.T.push({data:f,Aa:[e.port2,...l]})})}};
function Jb(a,b){return new Promise(c=>{const d=e=>{e.source===a.contentWindow&&e.data===b&&(window.removeEventListener("message",d),c(e))};window.addEventListener("message",d)})}
function Ib(a){const b=fb("IFRAME");if(!b.sandbox)throw Error("iframe sandboxes not supported");b.sandbox.value="allow-scripts";b.sandbox.supports&&b.sandbox.add&&b.sandbox.supports("allow-downloads")&&b.sandbox.add("allow-downloads");if(""==Fb){a=Db(a);var c=eb();a=`<!DOCTYPE html><body><input type="hidden" id="nonce" value="${a}" /><script nonce="${Db(c)}">${'/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\nvar f=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b},h=this||self,k=function(a){return a};var l;var m={},n=function(a,b){this.g=b===m?a:""};n.prototype.toString=function(){return this.g.toString()};var p=function(a){return a instanceof n&&a.constructor===n?a.g:"type_error:SafeScript"},q=function(a){if(void 0===l){var b=null;var c=h.trustedTypes;if(c&&c.createPolicy)try{b=c.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(d){h.console&&h.console.error(d.message)}l=b}a=(b=l)?b.createScript(a):a;return new n(a,m)};/*\n\n SPDX-License-Identifier: Apache-2.0\n*/\nfunction r(a,b){a.textContent=p(b);var c,d;(c=(b=null==(d=(c=(a.ownerDocument&&a.ownerDocument.defaultView||window).document).querySelector)?void 0:d.call(c,"script[nonce]"))?b.nonce||b.getAttribute("nonce")||"":"")&&a.setAttribute("nonce",c)};var t=function(a){var b=f.apply(1,arguments),c,d;"evalCspCompatiblyData"in window||(window.evalCspCompatiblyData={index:0});var e=window.evalCspCompatiblyData.index++;window.evalCspCompatiblyData[e]={args:b,callback:function(g,u){c=g;d=u}};b=document.createElement("script");b.async=!1;b.setAttribute("data-index",e);e=q(\'"use strict";\\v(function(){var idx=parseInt((document.currentScript||Array.prototype.slice.call(document.querySelectorAll("head script[data-index]"),-1)[0]).getAttribute("data-index"),10),curEvalData=evalCspCompatiblyData[idx];delete evalCspCompatiblyData[idx];(function(){var callback=curEvalData.callback;try{callback(true,(\'+\nString(p(a))+"\\n));}catch(ex){callback(false, ex);}}).apply(this, curEvalData.args);})()");r(b,e);e=function(g){c=!1;d=g.error||g};window.addEventListener("error",e);document.head.appendChild(b);window.removeEventListener("error",e);document.head.removeChild(b);if(!c)throw d;return d};var v=document.getElementById("nonce"),w=v?v.value:(new URL(location.href)).searchParams.get("nonce");function x(){if(self.origin)return"null"==self.origin;if(""!=location.host)return!1;try{return window.parent.escape(""),!1}catch(a){return!0}}\n(function(){if(!x())throw"sandboxing error";var a=new MessageChannel;a.port1.onmessage=function(c){try{var d=t.apply(null,[q("(function("+c.data.paramNames.join(", ")+") {\\n"+c.data.code+"\\n}).apply(null, arguments)")].concat(c.data.values));c.ports[0].postMessage({result:d})}catch(e){c.ports[0].postMessage({error:e.toString()})}};var b="*";"chrome-extension:"==location.protocol&&(b=location.origin);window.parent.postMessage(w,b,[a.port2])})();\n'}\x3c/script></body>`;c=
Ia(a);a=ta("data:text/html;charset=UTF-8;base64,"+btoa(c.toString()));b.srcdoc=c instanceof Ha&&c.constructor===Ha?c.ba:"type_error:SafeHtml"}else a=Eb(new Map([["nonce",a]]));b.src=sa(a).toString();b.style.cssText="height: 0; left: 0; position: absolute; top: 0; width: 0;";b.setAttribute("aria-hidden","true");return b};let R;
var Lb=function(){return k(function*(){return!1}())},Nb=function(a,b,c,d=""){return k(function*(){const e=b instanceof Blob?b:new Blob([b],{type:d});if("function"===typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,c);else if(!(va()||C("iPad")||C("iPod"))||0<=xa()?0:Fa()||!(!C("iPad")&&!C("iPhone")||C("Safari")&&!(Fa()||(F()?0:C("Coast"))||(F()?0:C("Opera"))||(F()?0:C("Edge"))||(F()?Ea("Microsoft Edge"):C("Edg/"))||(F()?Ea("Opera"):C("OPR"))||C("Firefox")||C("FxiOS")||C("Silk")||C("Android"))||
Fa()||(F()?0:C("Coast"))||C("Firefox")||C("FxiOS"))&&C("AppleWebKit")){const f=new FileReader;f.onload=()=>{const g=fb("A");var h=Cb(String(f.result),Bb)||za;if(h instanceof E)h=h instanceof E&&h.constructor===E?h.ca:"type_error:SafeUrl";else{b:if(zb){try{var l=new URL(h)}catch(n){l="https:";break b}l=l.protocol}else c:{l=document.createElement("a");try{l.href=h}catch(n){l=void 0;break c}l=l.protocol;l=":"===l||""===l?"https:":l}h="javascript:"!==l?h:void 0}void 0!==h&&(g.href=h);g.download=c;g.click()};
f.readAsDataURL(e)}else null==a.sandbox&&(a.sandbox=new Kb,a.sandbox.load()),yield a.sandbox.exec('var url=URL.createObjectURL(blob);var a=document.createElement("a");if(!("download" in a)){throw new Error("Downloading not supported on this browser");}a.href=url;a.download=filename;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);URL.revokeObjectURL(url);},250);',[{name:"blob",value:e,transfer:!1},{name:"filename",value:c,transfer:!1}]);yield Mb()}())},Ob=
class{static download(a,b,c=""){return k(function*(){(yield Lb())||(R||(R=new Ob,R.X()),yield Nb(R,a,b,c))}())}constructor(){"function"!==typeof navigator.msSaveOrOpenBlob&&(this.sandbox=new Kb)}X(){const a=this;k(function*(){null!=a.sandbox&&(yield a.sandbox.load())}())}download(a,b,c=""){const d=this;return k(function*(){(yield Lb())||(yield Nb(d,a,b,c))}())}};function Mb(){return new Promise(a=>{setTimeout(a,500)})}var Pb=Ob,S=["SafeDownloader"],T=m;
S[0]in T||"undefined"==typeof T.execScript||T.execScript("var "+S[0]);for(var U;S.length&&(U=S.shift());)S.length||void 0===Pb?T=T[U]&&T[U]!==Object.prototype[U]?T[U]:T[U]={}:T[U]=Pb;var Qb=function(a,b){const c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(e,f,g,h,l,n,D,vc){if("%"==n)return"%";const kb=c.shift();if("undefined"==typeof kb)throw Error("[goog.string.format] Not enough arguments");arguments[0]=kb;return V[n].apply(null,arguments)})},V={s:function(a,b,c){return isNaN(c)||""==c||a.length>=Number(c)?a:a=-1<b.indexOf("-",
0)?a+L(" ",Number(c)-a.length):L(" ",Number(c)-a.length)+a},f:function(a,b,c,d,e){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));let f;f=0>Number(a)?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=Number(a)&&(d=f+d);if(isNaN(c)||d.length>=Number(c))return d;d=isNaN(e)?Math.abs(Number(a)).toString():Math.abs(Number(a)).toFixed(e);a=Number(c)-d.length-f.length;return d=0<=b.indexOf("-",0)?f+d+L(" ",a):f+L(0<=b.indexOf("0",0)?"0":" ",a)+d},d:function(a,b,c,d,e,f,g,h){return V.f(parseInt(a,
10),b,c,d,0,f,g,h)}};V.i=V.d;V.u=V.d;class Rb{constructor(a,b){this.sa=100;this.na=a;this.wa=b;this.P=0;this.N=null}get(){let a;0<this.P?(this.P--,a=this.N,this.N=a.next,a.next=null):a=this.na();return a}put(a){this.wa(a);this.P<this.sa&&(this.P++,a.next=this.N,this.N=a)}};var Sb,Tb=function(){var a=m.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!C("Presto")&&(a=function(){var e=fb("IFRAME");e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=q(function(l){if(("*"==h||l.origin==h)&&l.data==g)this.port1.onmessage()},this);f.addEventListener("message",
e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!(F()?0:C("Trident")||C("MSIE"))){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Z;c.Z=null;e()}};return function(e){d.next={Z:e};d=d.next;b.port2.postMessage(0)}}return function(e){m.setTimeout(e,0)}};function Ub(a){m.setTimeout(()=>{throw a;},0)};class Vb{constructor(){this.R=this.F=null}add(a,b){const c=Wb.get();c.set(a,b);this.R?this.R.next=c:this.F=c;this.R=c}remove(){let a=null;this.F&&(a=this.F,this.F=this.F.next,this.F||(this.R=null),a.next=null);return a}}var Wb=new Rb(()=>new Xb,a=>a.reset());class Xb{constructor(){this.next=this.scope=this.fn=null}set(a,b){this.fn=a;this.scope=b;this.next=null}reset(){this.next=this.scope=this.fn=null}};let W,Yb=!1,Zb=new Vb,ac=(a,b)=>{W||$b();Yb||(W(),Yb=!0);Zb.add(a,b)},$b=()=>{if(m.Promise&&m.Promise.resolve){const a=m.Promise.resolve(void 0);W=()=>{a.then(bc)}}else W=()=>{var a=bc;"function"!==typeof m.setImmediate||m.Window&&m.Window.prototype&&(F()||!C("Edge"))&&m.Window.prototype.setImmediate==m.setImmediate?(Sb||(Sb=Tb()),Sb(a)):m.setImmediate(a)}};var bc=()=>{let a;for(;a=Zb.remove();){try{a.fn.call(a.scope)}catch(b){Ub(b)}Wb.put(a)}Yb=!1};var Y=function(a){this.j=0;this.ga=void 0;this.B=this.o=this.A=null;this.K=this.U=!1;if(a!=cb)try{var b=this;a.call(void 0,function(c){X(b,2,c)},function(c){X(b,3,c)})}catch(c){X(this,3,c)}},cc=function(){this.next=this.context=this.C=this.H=this.v=null;this.J=!1};cc.prototype.reset=function(){this.context=this.C=this.H=this.v=null;this.J=!1};var dc=new Rb(function(){return new cc},function(a){a.reset()}),ec=function(a,b,c){var d=dc.get();d.H=a;d.C=b;d.context=c;return d};
Y.prototype.then=function(a,b,c){return fc(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};Y.prototype.$goog_Thenable=!0;Y.prototype.ka=function(a,b){return fc(this,null,a,b)};Y.prototype.catch=Y.prototype.ka;Y.prototype.cancel=function(a){if(0==this.j){var b=new Z(a);ac(function(){gc(this,b)},this)}};
var gc=function(a,b){if(0==a.j)if(a.A){var c=a.A;if(c.o){for(var d=0,e=null,f=null,g=c.o;g&&(g.J||(d++,g.v==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.j&&1==d?gc(c,b):(f?(d=f,d.next==c.B&&(c.B=d),d.next=d.next.next):hc(c),ic(c,e,3,b)))}a.A=null}else X(a,3,b)},kc=function(a,b){a.o||2!=a.j&&3!=a.j||jc(a);a.B?a.B.next=b:a.o=b;a.B=b},fc=function(a,b,c,d){var e=ec(null,null,null);e.v=new Y(function(f,g){e.H=b?function(h){try{var l=b.call(d,h);f(l)}catch(n){g(n)}}:f;e.C=c?function(h){try{var l=c.call(d,
h);void 0===l&&h instanceof Z?g(h):f(l)}catch(n){g(n)}}:g});e.v.A=a;kc(a,e);return e.v};Y.prototype.Ba=function(a){this.j=0;X(this,2,a)};Y.prototype.Ca=function(a){this.j=0;X(this,3,a)};
var X=function(a,b,c){if(0==a.j){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.j=1;a:{var d=c,e=a.Ba,f=a.Ca;if(d instanceof Y){kc(d,ec(e||cb,f||null,a));var g=!0}else{if(d)try{var h=!!d.$goog_Thenable}catch(n){h=!1}else h=!1;if(h)d.then(e,f,a),g=!0;else{if(p(d))try{var l=d.then;if("function"===typeof l){lc(d,l,e,f,a);g=!0;break a}}catch(n){f.call(a,n);g=!0;break a}g=!1}}}g||(a.ga=c,a.j=b,a.A=null,jc(a),3!=b||c instanceof Z||mc(a,c))}},lc=function(a,b,c,d,e){var f=!1,g=function(l){f||
(f=!0,c.call(e,l))},h=function(l){f||(f=!0,d.call(e,l))};try{b.call(a,g,h)}catch(l){h(l)}},jc=function(a){a.U||(a.U=!0,ac(a.pa,a))},hc=function(a){var b=null;a.o&&(b=a.o,a.o=b.next,b.next=null);a.o||(a.B=null);return b};Y.prototype.pa=function(){for(var a;a=hc(this);)ic(this,a,this.j,this.ga);this.U=!1};
var ic=function(a,b,c,d){if(3==c&&b.C&&!b.J)for(;a&&a.K;a=a.A)a.K=!1;if(b.v)b.v.A=null,nc(b,c,d);else try{b.J?b.H.call(b.context):nc(b,c,d)}catch(e){oc.call(null,e)}dc.put(b)},nc=function(a,b,c){2==b?a.H.call(a.context,c):a.C&&a.C.call(a.context,c)},mc=function(a,b){a.K=!0;ac(function(){a.K&&oc.call(null,b)})},oc=Ub,Z=function(a){y.call(this,a)};r(Z,y);Z.prototype.name="cancel";var pc=function(a,b){if("function"!==typeof a)if(a&&"function"==typeof a.handleEvent)a=q(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:m.setTimeout(a,b||0)},qc=function(a){var b=null;return(new Y(function(c,d){b=pc(function(){c(void 0)},a);-1==b&&d(Error("Failed to schedule timer."))})).ka(function(c){m.clearTimeout(b);throw c;})};function rc(){const a=chrome.runtime.getManifest();return Qb("%s v%s log buffer as of %s (%s):\n",a.name,a.version,(new Date).toUTCString(),ab)}
var sc=function(a){return k(function*(){var b=yield a.background.getLogBuffer();const c=Ra();b=[rc(),...b.map(d=>{a:{var e=d.l;if(!I){I={};for(let n=0,D;D=H[n];n++)I[D.value]=D,I[D.name]=D}if(e in I)e=I[e];else{for(var f=0;f<H.length;++f){var g=H[f];if(g.value<=e){e=g;break a}}e=null}}e=new La(e,d.m,d.n,d.t,d.s);d=[];d.push(c.va," ");c.ha&&(f=new Date(e.la),d.push("[",K(f.getFullYear()-2E3)+K(f.getMonth()+1)+K(f.getDate())+" "+K(f.getHours())+":"+K(f.getMinutes())+":"+K(f.getSeconds())+"."+K(Math.floor(f.getMilliseconds()/
10)),"] "));if(c.ia){f=d.push;g=c.za.get();g=(e.la-g)/1E3;var h=g.toFixed(3),l=0;if(1>g)l=2;else for(;100>g;)l++,g*=10;for(;0<l--;)h=" "+h;f.call(d,"[",h,"s] ")}c.ya&&d.push("[",e.ta,"] ");c.ja&&d.push("[",e.ra.name,"] ");d.push(e.getMessage());c.xa&&(e=e.aa,void 0!==e&&d.push("\n",e instanceof Error?e.message:String(e)));c.ma&&d.push("\n");return d.join("")})];yield Ob.download(new Blob(b,{type:"text/plain"}),"EndpointVerification.log","text/plain")}())},tc=function(a,b){return k(function*(){b.disabled=
!0;try{yield a.background.uiEvent({event:"Sync Button Click"})}catch(c){}b.disabled=!1}())};
class uc{constructor(){this.background=Xa();document.addEventListener("DOMContentLoaded",()=>{this.initialize()})}initialize(){const a=this;return k(function*(){for(var b=1;10>=b;++b)try{yield a.background.hello();break}catch(f){const g=f;if(11<=b)throw g;yield qc(100+(15<<b))}b=document.querySelectorAll("[data-i18n]");for(var c of b)b=c.getAttribute("data-i18n"),c.textContent=chrome.i18n.getMessage(b)||chrome.i18n.getMessage(`${b}_${"external"}`)||"PLACEHOLDER";if(c=document.querySelector("#download-log"))c.onclick=
()=>sc(a);if(c=document.querySelector("#show-log"))c.onclick=()=>{chrome.tabs.create({url:`${window.location.origin}/log.html`})};const d=document.querySelector("#log-level");if(d)if(c=(yield a.background.getQuirks()).logLevel){let f,g;d.value=null!=(g=null==(f=c.value)?void 0:f.toString())?g:"[ERROR]";d.onchange=()=>k(function*(){yield a.background.updateQuirks({logLevel:Number(d.value)})}())}else d.disabled=!0;const e=document.querySelector("#force-sync");e&&(e.onclick=()=>tc(a,e))}())}}new uc;
