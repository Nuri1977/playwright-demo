/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var k,aa=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})},m=this||self,ba=function(a){var b=typeof a;b="object"!=b?b:a?Array.isArray(a)?"array":b:"null";return"array"==b||"object"==b&&"number"==typeof a.length},p=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ca=function(a,b,c){return a.call.apply(a.bind,arguments)},
da=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},q=function(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ca:da;return q.apply(null,arguments)},r=function(a,b){function c(){}c.prototype=b.prototype;a.Oa=b.prototype;a.prototype=
new c;a.prototype.constructor=a;a.Na=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}},ea=function(a){return a};var fa="getAccounts hello getLogBuffer recordLog getQuirks updateQuirks uiEvent".split(" ");var na=function(a){switch(a){case ha.name:return ha;case ia.name:return ia;case ja.name:return ja;case ka.name:return ka;case la.name:return la;default:let b=ma.get(a);b||(b=new t(a),ma.set(a,b));return b}},t=class{constructor(a){this.name=a}toString(){return this.name}},ma=new Map,ha=new t("async"),ia=new t("generic"),ja=new t("runtime"),ka=new t("system"),la=new t("crypto"),oa=class extends Error{constructor(a,b,c){super(c);this.code=a;this.category=b;Object.setPrototypeOf(this,new.target.prototype)}toString(){return`${this.category}:${this.code} (${this.message||
"Undefined error."})`}};var pa=class{constructor(){let a=void 0,b=void 0;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}},qa=class extends oa{constructor(a,b="One or more errors occurred."){super(1,ha,b);this.errors=a;Object.setPrototypeOf(this,new.target.prototype)}flatten(){const a=[],b=[this.errors.slice(0)];for(;0!==b.length;){const c=b[0];for(;0!==c.length;){const d=c.shift();if(d instanceof qa){b.unshift(d.errors.slice(0));break}else a.push(d)}b[0]===c&&b.shift()}return new qa(a,this.message)}};var ra=class{constructor(){this.F=[]}subscribe(a){this.F.push(a)}unsubscribe(a){a=this.F.indexOf(a);if(-1===a)return!1;this.F.splice(a,1);return!0}publish(a){const b=[],c=this.F.slice(0);for(const d of c)b.push(d(a));return b}};function u(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));void 0!==b&&(this.cause=b)}r(u,Error);u.prototype.name="CustomError";var sa;function ta(a,b){a=a.split("%s");let c="";const d=a.length-1;for(let e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");u.call(this,c+a[d])}r(ta,u);ta.prototype.name="AssertionError";const ua=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(let c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=Array.prototype.forEach?function(a,b){Array.prototype.forEach.call(a,b,void 0)}:function(a,b){const c=a.length,d="string"===typeof a?a.split(""):a;for(let e=0;e<c;e++)e in d&&b.call(void 0,d[e],e,a)};
function wa(a){const b=a.length;if(0<b){const c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c}return[]};var za=function(a){a:{var b=["window","location","href"];var c=m;for(var d=0;d<b.length;d++)if(c=c[b[d]],null==c){c=null;break a}}null==a&&(a='Unknown Error of type "null/undefined"');if("string"===typeof a)return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:c,stack:"Not available"};b=!1;try{var e=a.lineNumber||a.line||"Not available"}catch(g){e="Not available",b=!0}try{var f=a.fileName||a.filename||a.sourceURL||m.$googDebugFname||c}catch(g){f="Not available",b=!0}c=xa(a);if(!(!b&&
a.lineNumber&&a.fileName&&a.stack&&a.message&&a.name))return b=a.message,null==b&&(b=a.constructor&&a.constructor instanceof Function?'Unknown Error of type "'+(a.constructor.name?a.constructor.name:ya(a.constructor))+'"':"Unknown Error of unknown type","function"===typeof a.toString&&Object.prototype.toString!==a.toString&&(b+=": "+a.toString())),{message:b,name:a.name||"UnknownError",lineNumber:e,fileName:f,stack:c||"Not available"};a.stack=c;return{message:a.message,name:a.name,lineNumber:a.lineNumber,
fileName:a.fileName,stack:a.stack}},xa=function(a,b){b||(b={});b[Aa(a)]=!0;var c=a.stack||"";(a=a.cause)&&!b[Aa(a)]&&(c+="\nCaused by: ",a.stack&&0==a.stack.indexOf(a.toString())||(c+="string"===typeof a?a:a.message+"\n"),c+=xa(a,b));return c},Aa=function(a){var b="";"function"===typeof a.toString&&(b=""+a);return b+a.stack},Ba=function(a){var b=Error();if(Error.captureStackTrace)Error.captureStackTrace(b,a||Ba),b=String(b.stack);else{try{throw b;}catch(c){b=c}b=(b=b.stack)?String(b):null}b||(b=Ca(a||
arguments.callee.caller,[]));return b},Ca=function(a,b){var c=[];if(0<=ua(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ya(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=ya(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.slice(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");
try{c.push(Ca(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")},ya=function(a){if(v[a])return v[a];a=String(a);if(!v[a]){var b=/function\s+([^\(]+)/m.exec(a);v[a]=b?b[1]:"[Anonymous]"}return v[a]},v={};var w=function(){this.ta=Date.now()},Da=null;w.prototype.set=function(a){this.ta=a};w.prototype.reset=function(){this.set(Date.now())};w.prototype.get=function(){return this.ta};function Ea(a,b){for(const c in a)b.call(void 0,a[c],c,a)};var Fa={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};var Ga;var x=function(a,b){this.xa=a===Ha&&b||"";this.Aa=Ia};x.prototype.o=!0;x.prototype.i=function(){return this.xa};var y=function(a){return a instanceof x&&a.constructor===x&&a.Aa===Ia?a.xa:"type_error:Const"},Ia={},Ha={};var z=class{constructor(a,b){this.fa=b===Ja?a:""}toString(){return this.fa+""}};z.prototype.o=!0;z.prototype.i=function(){return this.fa.toString()};var Ja={};var Ra=function(a){if(!Ka.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(La,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ma,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Na,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Oa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Pa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Qa,"&#0;"));return a},La=/&/g,Ma=/</g,Na=/>/g,Oa=/"/g,Pa=/'/g,Qa=/\x00/g,Ka=/[\x00&<>"']/;var B=class{constructor(a,b){this.ea=b===A?a:""}toString(){return this.ea.toString()}};B.prototype.o=!0;B.prototype.i=function(){return this.ea.toString()};
var Sa=function(a){return a instanceof B&&a.constructor===B?a.ea:"type_error:SafeUrl"},Ta=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ua=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Va=function(a){if(a instanceof B)return a;a="object"==typeof a&&a.o?a.i():String(a);Ua.test(a)?a=new B(a,A):(a=String(a).replace(/(%0A|%0D)/g,""),a=a.match(Ta)?new B(a,A):null);return a},A={},Wa=new B("about:invalid#zClosurez",A);const Xa={};class C{constructor(a,b){this.da=b===Xa?a:"";this.o=!0}i(){return this.da}toString(){return this.da.toString()}}var Ya=new C("",Xa);
function Za(a){if(a instanceof B)return'url("'+Sa(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(a instanceof x)a=y(a);else{a=String(a);var b=a.replace($a,"$1").replace($a,"$1").replace(ab,"url");if(bb.test(b)){if(b=!cb.test(a)){let c=b=!0;for(let d=0;d<a.length;d++){const e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}b=b&&c&&db(a)}a=b?eb(a):"zClosurez"}else a="zClosurez"}if(/[{;}]/.test(a))throw new ta("Value does not allow [{;}], got: %s.",[a]);return a}
function db(a){let b=!0;const c=/^[-_a-zA-Z0-9]$/;for(let d=0;d<a.length;d++){const e=a.charAt(d);if("]"==e){if(b)return!1;b=!0}else if("["==e){if(!b)return!1;b=!1}else if(!b&&!c.test(e))return!1}return b}
const bb=RegExp("^[-+,.\"'%_!#/ a-zA-Z0-9\\[\\]]+$"),ab=RegExp("\\b(url\\([ \t\n]*)('[ -&(-\\[\\]-~]*'|\"[ !#-\\[\\]-~]*\"|[!#-&*-\\[\\]-~]*)([ \t\n]*\\))","g"),$a=RegExp("\\b(calc|cubic-bezier|fit-content|hsl|hsla|linear-gradient|matrix|minmax|radial-gradient|repeat|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?|steps|var)\\([-+*/0-9a-zA-Z.%#\\[\\], ]+\\)","g"),cb=/\/\*/;
function eb(a){return a.replace(ab,(b,c,d,e)=>{let f="";d=d.replace(/^(['"])(.*)\1$/,(g,h,l)=>{f=h;return l});b=(Va(d)||Wa).i();return c+f+b+f+e})};const fb={};class D{constructor(a,b){this.ca=b===fb?a:"";this.o=!0}toString(){return this.ca.toString()}i(){return this.ca}}var gb=new D("",fb);function E(){var a=m.navigator;return a&&(a=a.userAgent)?a:""}var F;const hb=m.navigator;F=hb?hb.userAgentData||null:null;function ib(){return F&&0<F.brands.length?!1:-1!=E().indexOf("Trident")||-1!=E().indexOf("MSIE")};const kb={};
var H=function(a){return a instanceof G&&a.constructor===G?a.ba:"type_error:SafeHtml"},lb=function(a){return a instanceof G?a:I(Ra("object"==typeof a&&a.o?a.i():String(a)))},I=function(a){if(void 0===Ga){var b=null;var c=m.trustedTypes;if(c&&c.createPolicy)try{b=c.createPolicy("goog#html",{createHTML:ea,createScript:ea,createScriptURL:ea})}catch(d){m.console&&m.console.error(d.message)}Ga=b}a=(b=Ga)?b.createHTML(a):a;return new G(a,kb)},J=function(a){if(a instanceof G)return a;a=lb(a);a=H(a).toString().replace(/  /g,
" &#160;").replace(/(\r\n|\r|\n)/g,"<br>");return I(a)},ob=function(a){if(!mb.test(a))throw Error("");if(a.toUpperCase()in nb)throw Error("");},qb=function(a,b,c){var d="";if(b)for(let g in b)if(Object.prototype.hasOwnProperty.call(b,g)){if(!mb.test(g))throw Error("");var e=b[g];if(null!=e){var f=g;if(e instanceof x)e=y(e);else if("style"==f.toLowerCase()){if(!p(e))throw Error("");if(!(e instanceof C)){let h="";for(let l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(!/^[-_a-zA-Z0-9]+$/.test(l))throw Error(`Name allows only [-_a-zA-Z0-9], got: ${l}`);
let n=e[l];null!=n&&(n=Array.isArray(n)?n.map(Za).join(" "):Za(n),h+=`${l}:${n};`)}e=h?new C(h,Xa):Ya}e=e instanceof C&&e.constructor===C?e.da:"type_error:SafeStyle"}else{if(/^on/i.test(f))throw Error("");if(f.toLowerCase()in pb)if(e instanceof z)e=(e instanceof z&&e.constructor===z?e.fa:"type_error:TrustedResourceUrl").toString();else if(e instanceof B)e=Sa(e);else if("string"===typeof e)e=(Va(e)||Wa).i();else throw Error("");}e.o&&(e=e.i());f=`${f}="`+Ra(String(e))+'"';d+=" "+f}}b=`<${a}`+d;null==
c?c=[]:Array.isArray(c)||(c=[c]);!0===Fa[a.toLowerCase()]?b+=">":(c=K(c),b+=">"+H(c).toString()+"</"+a+">");return I(b)},rb=function(a){const b=lb(L),c=[],d=e=>{Array.isArray(e)?e.forEach(d):(e=lb(e),c.push(H(e).toString()))};a.forEach(d);return I(c.join(H(b).toString()))},K=function(a){return rb(Array.prototype.slice.call(arguments))};class G{constructor(a,b){this.ba=b===kb?a:"";this.o=!0}i(){return this.ba.toString()}toString(){return this.ba.toString()}}
const mb=/^[a-zA-Z0-9-]+$/,pb={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},nb={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};var L=new G(m.trustedTypes&&m.trustedTypes.emptyHTML||"",kb),sb=I("<br>");var M=class{constructor(a,b){this.name=a;this.value=b}toString(){return this.name}},N=new M("OFF",Infinity),tb=new M("SHOUT",1200),ub=new M("SEVERE",1E3),vb=new M("WARNING",900),wb=new M("INFO",800),xb=new M("CONFIG",700),O=[N,tb,ub,vb,wb,xb,new M("FINE",500),new M("FINER",400),new M("FINEST",300),new M("ALL",0)],P=null,yb=class{constructor(){this.N=0;this.clear()}clear(){this.ka=Array(this.N);this.na=-1;this.pa=!1}},zb,Ab=class{constructor(a,b,c,d,e){this.I=void 0;this.reset(a||N,b,c,d,e)}reset(a,
b,c,d){this.za=d||Date.now();this.aa=a;this.Ia=b;this.qa=c;this.I=void 0}getMessage(){return this.Ia}},Bb=function(a){return a.level?a.level:a.parent?Bb(a.parent):N},Cb=class{constructor(a,b=null){this.level=null;this.F=[];this.parent=b||null;this.children=[];this.Ha={Z:()=>a}}publish(a){let b=this;for(;b;)b.F.forEach(c=>{c(a)}),b=b.parent}},Q=function(a,b){var c=a.entries[b];if(c)return c;c=Q(a,b.slice(0,Math.max(b.lastIndexOf("."),0)));const d=new Cb(b,c);a.entries[b]=d;c.children.push(d);return d},
Db=class{constructor(){this.entries={};const a=new Cb("");a.level=xb;this.entries[""]=a}},Eb,R=function(){Eb||(Eb=new Db);return Eb},Fb=function(a,b,c){var d;if(d=a)if(d=a&&b){d=b.value;var e=a?Bb(Q(R(),a.Z())):N;d=d>=e.value}if(d){b=b||N;d=Q(R(),a.Z());"function"===typeof c&&(c=c());zb||(zb=new yb);e=zb;a=a.Z();if(0<e.N){var f=(e.na+1)%e.N;e.na=f;e.pa?(e=e.ka[f],e.reset(b,c,a),a=e):(e.pa=f==e.N-1,a=e.ka[f]=new Ab(b,c,a))}else a=new Ab(b,c,a);a.I=void 0;d.publish(a)}},Hb=function(a){var b=Gb;b&&Fb(b,
wb,a)};var S=function(a){this.ra=a||"";Da||(Da=new w);this.wa=Da};k=S.prototype;k.ja=!0;k.S=!0;k.ha=!0;k.va=!0;k.ga=!1;k.ia=!1;
var Ib=function(a){a=new Date(a.za);return T(a.getFullYear()-2E3)+T(a.getMonth()+1)+T(a.getDate())+" "+T(a.getHours())+":"+T(a.getMinutes())+":"+T(a.getSeconds())+"."+T(Math.floor(a.getMilliseconds()/10))},T=function(a){return 10>a?"0"+a:String(a)},Jb=function(a,b){a=(a.za-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b},U=function(a){S.call(this,a)};r(U,S);U.prototype.ga=!0;U.prototype.oa=function(a){return a?this.X(a).i():""};
U.prototype.X=function(a){if(!a)return L;switch(a.aa.value){case tb.value:var b="dbg-sh";break;case ub.value:b="dbg-sev";break;case vb.value:b="dbg-w";break;case wb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.ra," ");this.S&&c.push("[",Ib(a),"] ");this.ha&&c.push("[",Jb(a,this.wa.get()),"s] ");this.va&&c.push("[",a.qa,"] ");this.ia&&c.push("[",a.aa.name,"] ");c=J(c.join(""));var d=L;if(this.ga&&a.I){d=K;try{var e=za(a.I);var f=e.fileName;null==f&&(f="");if(/^https?:\/\//i.test(f)){var g=
Va(f)||Wa;var h=new B("view-source:"+Sa(g),A)}else h=new B(y(new x(Ha,"sanitizedviewsrc")),A);f=K;var l=J("Message: "+e.message+"\nUrl: ");h={href:h,target:"_new"};var n=e.fileName;ob("a");var sc=qb("a",h,n);var jb=f(l,sc,J("\nLine: "+e.lineNumber+"\n\nBrowser stack:\n"+e.stack+"-> [end]\n\nJS stack traversal:\n"+Ba(void 0)+"-> "))}catch(tc){jb=J("Exception trying to expose exception! You win, we lose. "+tc)}d=d(sb,jb)}a=J(a.getMessage());b={"class":b};a=K(a,d);ob("span");b=qb("span",b,a);return this.ja?
K(c,b,sb):K(c,b)};var V=function(a){S.call(this,a)};r(V,S);V.prototype.oa=function(a){var b=[];b.push(this.ra," ");this.S&&b.push("[",Ib(a),"] ");this.ha&&b.push("[",Jb(a,this.wa.get()),"s] ");this.va&&b.push("[",a.qa,"] ");this.ia&&b.push("[",a.aa.name,"] ");b.push(a.getMessage());this.ga&&(a=a.I,void 0!==a&&b.push("\n",a instanceof Error?a.message:String(a)));this.ja&&b.push("\n");return b.join("")};V.prototype.X=function(a){return J(V.prototype.oa(a))};function Kb(a=new V){a.S=!0;a.ha=!1;a.ia=!0}function Lb(a){a:{var b=a.l;if(!P){P={};for(let c=0,d;d=O[c];c++)P[d.value]=d,P[d.name]=d}if(b in P)b=P[b];else{for(let c=0;c<O.length;++c){let d=O[c];if(d.value<=b){b=d;break a}}b=null}}return new Ab(b,a.m,a.n,a.t,a.s)}Q(R(),"");var Mb=new M("TRACE",100);O.push(new M("DEBUG",600));O.push(Mb);function Nb(a){switch(a.type){case 0:return a.object;case 1:return Error(a.message);case 2:return new oa(a.code,na(a.category),a.message);case 3:return new qa(a.errors.map(Nb),a.message)}};var Ob=function(a,...b){return aa(function*(){const c=new pa;chrome.runtime.sendMessage({method:a,args:b},d=>{const e=chrome.runtime.lastError;e?c.reject(new oa(1,ja,`Operation '${String(a)}' failed. ${e.message||"Undefined error."}`)):d.error?c.reject(Nb(d.error)):c.resolve(d.output)});return c.promise}())},Pb=function(a){for(const [c,d]of a.sa){const e=c;var b=d;if(fa.every(f=>e.has(f)))return b}b={};for(const c of fa)Object.defineProperty(b,c,{value:(...d)=>Ob(c,...d),writable:!1});a.sa.set(new Set(fa),
b);return b},Qb=function(a){let b=a.events.get("log:record");if(!b){const c=chrome.runtime.connect({name:"log:record"});b={port:c,source:new ra,Ja:[]};c.onMessage.addListener(d=>{d=null===d?void 0:d;const e=b.Ja.shift();e?e.resolve(d):b.source.publish(d)});a.events.set("log:record",b)}return b},Rb=class{constructor(){this.events=new Map;this.sa=new Map}};var Sb=ib();var Tb=function(){};var Ub=function(a){let b=!1,c;return function(){b||(c=a(),b=!0);return c}}(function(){var a=document.createElement("div"),b=document.createElement("div");b.appendChild(document.createElement("div"));a.appendChild(b);b=a.firstChild.firstChild;a.innerHTML=H(L);return!b.parentElement}),Vb=function(a,b){if(Ub())for(;a.lastChild;)a.removeChild(a.lastChild);a.innerHTML=H(b)},Wb=/^[\w+/_-]+[=]{0,2}$/,Xb=function(){var a=m.document;return a.querySelector?(a=a.querySelector('style[nonce],link[rel="stylesheet"][nonce]'))&&
(a=a.nonce||a.getAttribute("nonce"))&&Wb.test(a)?a:"":""};var Zb=function(a,b){Ea(b,function(c,d){c&&"object"==typeof c&&c.o&&(c=c.i());"style"==d?a.style.cssText=c:"class"==d?a.className=c:"for"==d?a.htmlFor=c:Yb.hasOwnProperty(d)?a.setAttribute(Yb[d],c):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,c):a[d]=c})},Yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",
width:"width"},$b=function(a,b,c,d){function e(h){h&&b.appendChild("string"===typeof h?a.createTextNode(h):h)}for(;d<c.length;d++){var f=c[d];if(!ba(f)||p(f)&&0<f.nodeType)e(f);else{a:{if(f&&"number"==typeof f.length){if(p(f)){var g="function"==typeof f.item||"string"==typeof f.item;break a}if("function"===typeof f){g="function"==typeof f.item;break a}}g=!1}va(g?wa(f):f,e)}}},ac=function(a,b){b=String(b);"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase());return a.createElement(b)},bc=function(a){return 9==
a.nodeType?a:a.ownerDocument||a.document},W=function(a){this.C=a||m.document||document};W.prototype.getElementsByTagName=function(a,b){return(b||this.C).getElementsByTagName(String(a))};var cc=function(a,b){a=a.C;b=b&&"*"!=b?String(b).toUpperCase():"";b=a.querySelectorAll&&a.querySelector&&b?a.querySelectorAll(b+""):a.getElementsByTagName(b||"*");return b};k=W.prototype;k.setProperties=Zb;
k.ma=function(a,b,c){var d=this.C,e=arguments,f=e[1],g=ac(d,String(e[0]));f&&("string"===typeof f?g.className=f:Array.isArray(f)?g.className=f.join(" "):Zb(g,f));2<e.length&&$b(d,g,e,2);return g};k.createElement=function(a){return ac(this.C,a)};k.createTextNode=function(a){return this.C.createTextNode(String(a))};k.appendChild=function(a,b){a.appendChild(b)};k.append=function(a,b){$b(bc(a),a,arguments,1)};k.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
k.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};k.getChildren=function(a){return void 0!=a.children?a.children:Array.prototype.filter.call(a.childNodes,function(b){return 1==b.nodeType})};k.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var dc=function(a,b){b=b instanceof D&&b.constructor===D?b.ca:"type_error:SafeStyleSheet";if(Sb&&void 0!==a.cssText)a.cssText=b;else if(m.trustedTypes)if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild(bc(a).createTextNode(String(b)))}else a.innerHTML=b};var ec=function(a){q(this.U,this);this.Y=new U;this.Y.S=!1;this.g=a;this.Ea=this.g.ownerDocument||this.g.document;this.Da=new W(this.Ea);a=y(new x(Ha,".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"));a=0===a.length?gb:new D(a,fb);var b=(b=this.g)?
new W(bc(b)):sa||(sa=new W);var c=b.C;if(Sb&&c.createStyleSheet)b=c.createStyleSheet(),dc(b,a);else{c=cc(b,"HEAD")[0];if(!c){var d=cc(b,"BODY")[0];c=b.ma("HEAD");d.parentNode.insertBefore(c,d)}d=b.ma("STYLE");var e=Xb();e&&d.setAttribute("nonce",e);dc(d,a);b.appendChild(c,d)}this.g.className+=" logdiv"};
ec.prototype.U=function(a){if(a){var b=100>=this.g.scrollHeight-this.g.scrollTop-this.g.clientHeight,c=this.Da.createElement("DIV");c.className="logmsg";a=this.Y.X(a);Vb(c,a);this.g.appendChild(c);b&&(this.g.scrollTop=this.g.scrollHeight)}};ec.prototype.clear=function(){this.g&&Vb(this.g,L)};var gc=class{constructor(){var a=fc;this.Ba=a;this.background=Pb(a)}initialize(){const a=this;return aa(function*(){const b=document.querySelector("#log-buffer"),c=new ec(b);Kb(c.Y);Qb(a.Ba).source.subscribe(e=>{const f=b.scrollTop===b.scrollHeight;c.U(Lb(e));f&&(b.scrollTop=b.scrollHeight)});var d=yield a.background.getLogBuffer();for(const e of d)c.U(Lb(e));if(d=document.querySelector("#clear-log"))d.onclick=()=>{c.clear()};d=document.querySelectorAll("[data-i18n]");for(const e of d)d=e.getAttribute("data-i18n"),
e.textContent=chrome.i18n.getMessage(d)||"PLACEHOLDER"}())}};class hc{constructor(a,b){this.Ga=100;this.Ca=a;this.Ka=b;this.R=0;this.P=null}get(){let a;0<this.R?(this.R--,a=this.P,this.P=a.next,a.next=null):a=this.Ca();return a}put(a){this.Ka(a);this.R<this.Ga&&(this.R++,a.next=this.P,this.P=a)}};var ic,jc=function(){var a=m.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==E().indexOf("Presto")&&(a=function(){var e=ac(document,"IFRAME");e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=q(function(l){if(("*"==h||l.origin==h)&&l.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!ib()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.la;c.la=null;e()}};return function(e){d.next={la:e};d=d.next;b.port2.postMessage(0)}}return function(e){m.setTimeout(e,0)}};function kc(a){m.setTimeout(()=>{throw a;},0)};class lc{constructor(){this.T=this.H=null}add(a,b){const c=mc.get();c.set(a,b);this.T?this.T.next=c:this.H=c;this.T=c}remove(){let a=null;this.H&&(a=this.H,this.H=this.H.next,this.H||(this.T=null),a.next=null);return a}}var mc=new hc(()=>new nc,a=>a.reset());class nc{constructor(){this.next=this.scope=this.fn=null}set(a,b){this.fn=a;this.scope=b;this.next=null}reset(){this.next=this.scope=this.fn=null}};let oc,pc=!1,qc=new lc,uc=(a,b)=>{oc||rc();pc||(oc(),pc=!0);qc.add(a,b)},rc=()=>{if(m.Promise&&m.Promise.resolve){const a=m.Promise.resolve(void 0);oc=()=>{a.then(vc)}}else oc=()=>{var a=vc,b;!(b="function"!==typeof m.setImmediate)&&(b=m.Window&&m.Window.prototype)&&((b=!!F&&0<F.brands.length)||(b=-1==E().indexOf("Edge")),b=b&&m.Window.prototype.setImmediate==m.setImmediate);b?(ic||(ic=jc()),ic(a)):m.setImmediate(a)}};
var vc=()=>{let a;for(;a=qc.remove();){try{a.fn.call(a.scope)}catch(b){kc(b)}mc.put(a)}pc=!1};var Y=function(a){this.j=0;this.ua=void 0;this.B=this.u=this.A=null;this.O=this.V=!1;if(a!=Tb)try{var b=this;a.call(void 0,function(c){X(b,2,c)},function(c){X(b,3,c)})}catch(c){X(this,3,c)}},wc=function(){this.next=this.context=this.G=this.J=this.v=null;this.K=!1};wc.prototype.reset=function(){this.context=this.G=this.J=this.v=null;this.K=!1};var xc=new hc(function(){return new wc},function(a){a.reset()}),yc=function(a,b,c){var d=xc.get();d.J=a;d.G=b;d.context=c;return d};
Y.prototype.then=function(a,b,c){return zc(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};Y.prototype.$goog_Thenable=!0;Y.prototype.ya=function(a,b){return zc(this,null,a,b)};Y.prototype.catch=Y.prototype.ya;Y.prototype.cancel=function(a){if(0==this.j){var b=new Z(a);uc(function(){Ac(this,b)},this)}};
var Ac=function(a,b){if(0==a.j)if(a.A){var c=a.A;if(c.u){for(var d=0,e=null,f=null,g=c.u;g&&(g.K||(d++,g.v==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.j&&1==d?Ac(c,b):(f?(d=f,d.next==c.B&&(c.B=d),d.next=d.next.next):Bc(c),Cc(c,e,3,b)))}a.A=null}else X(a,3,b)},Ec=function(a,b){a.u||2!=a.j&&3!=a.j||Dc(a);a.B?a.B.next=b:a.u=b;a.B=b},zc=function(a,b,c,d){var e=yc(null,null,null);e.v=new Y(function(f,g){e.J=b?function(h){try{var l=b.call(d,h);f(l)}catch(n){g(n)}}:f;e.G=c?function(h){try{var l=c.call(d,
h);void 0===l&&h instanceof Z?g(h):f(l)}catch(n){g(n)}}:g});e.v.A=a;Ec(a,e);return e.v};Y.prototype.La=function(a){this.j=0;X(this,2,a)};Y.prototype.Ma=function(a){this.j=0;X(this,3,a)};
var X=function(a,b,c){if(0==a.j){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.j=1;a:{var d=c,e=a.La,f=a.Ma;if(d instanceof Y){Ec(d,yc(e||Tb,f||null,a));var g=!0}else{if(d)try{var h=!!d.$goog_Thenable}catch(n){h=!1}else h=!1;if(h)d.then(e,f,a),g=!0;else{if(p(d))try{var l=d.then;if("function"===typeof l){Fc(d,l,e,f,a);g=!0;break a}}catch(n){f.call(a,n);g=!0;break a}g=!1}}}g||(a.ua=c,a.j=b,a.A=null,Dc(a),3!=b||c instanceof Z||Gc(a,c))}},Fc=function(a,b,c,d,e){var f=!1,g=function(l){f||
(f=!0,c.call(e,l))},h=function(l){f||(f=!0,d.call(e,l))};try{b.call(a,g,h)}catch(l){h(l)}},Dc=function(a){a.V||(a.V=!0,uc(a.Fa,a))},Bc=function(a){var b=null;a.u&&(b=a.u,a.u=b.next,b.next=null);a.u||(a.B=null);return b};Y.prototype.Fa=function(){for(var a;a=Bc(this);)Cc(this,a,this.j,this.ua);this.V=!1};
var Cc=function(a,b,c,d){if(3==c&&b.G&&!b.K)for(;a&&a.O;a=a.A)a.O=!1;if(b.v)b.v.A=null,Hc(b,c,d);else try{b.K?b.J.call(b.context):Hc(b,c,d)}catch(e){Ic.call(null,e)}xc.put(b)},Hc=function(a,b,c){2==b?a.J.call(a.context,c):a.G&&a.G.call(a.context,c)},Gc=function(a,b){a.O=!0;uc(function(){a.O&&Ic.call(null,b)})},Ic=kc,Z=function(a){u.call(this,a)};r(Z,u);Z.prototype.name="cancel";var Jc=function(a,b){if("function"!==typeof a)if(a&&"function"==typeof a.handleEvent)a=q(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:m.setTimeout(a,b||0)},Kc=function(a){var b=null;return(new Y(function(c,d){b=Jc(function(){c(void 0)},a);-1==b&&d(Error("Failed to schedule timer."))})).ya(function(c){m.clearTimeout(b);throw c;})};const fc=new Rb,Lc=Pb(fc),Gb=Q(R(),"Log Script").Ha;function Mc(){aa(function*(){Hb("Initializing...");for(let b=1;10>=b;++b)try{yield Lc.hello();break}catch(c){const d=c;if(10<=b){var a=Gb;a&&Fb(a,ub,`Failed to communicate with background page after ${b} attempts. ${d.message}`);throw d;}yield Kc(100+(15<<b))}yield(new gc).initialize();Hb("Done.")}())}document.addEventListener("DOMContentLoaded",()=>{Hb("Handling DOMContentLoaded...");Mc()});
